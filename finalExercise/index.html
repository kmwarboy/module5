<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Final Exercise | NYT Books</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css?family=Amatic+SC|Cormorant+Garamond&display=swap" rel="stylesheet">
</head>
<body>
    <h1>New York Times Bestsellers</h1>
    <section class="booksSection">
    <script>
        var getData = fetch('https://api.nytimes.com/svc/books/v3/lists/best-sellers/history.json?api-key=2AlF0sSGz7reA4EbZWXXYG5rSiDWyFiW', {method: 'GET'});
        getData.then(function(response){
            console.log(response);

            var printData = response.text();
            printData.then(function(text) {
                console.log(text);

                var parseData = JSON.parse(text);
                console.log(parseData);
                
                // var displayData = document.createElement('p');
                // displayData.innerHTML = parseData;
                // document.body.appendChild(displayData);
                
                // const firstBook = parseData.results[7].title;
                // console.log(firstBook); 

                // for (let i = 0; i < parseData.results.length; i ++) {
                //     console.log(parseData.results[i].title);
                // };
                parseData.results.forEach(element => {
                    var booksList = document.createElement('div');
                    console.log(element);
                    var title = document.createTextNode(element.title);
                    var author = document.createTextNode(element.author);
                    var booksAuthor = document.createElement('p')
                    var booksTitle = document.createElement('p');
                    booksTitle.appendChild(title);
                    booksAuthor.appendChild(author);
                    booksList.appendChild(booksAuthor);
                    booksList.appendChild(booksTitle);
                    document.getElementsByClassName('booksSection')[0].appendChild(booksList);
                });

            });
        });
    </script>
</section>
</body>
</main>
</html>